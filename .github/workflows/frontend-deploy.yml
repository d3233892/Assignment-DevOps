# This workflow builds and deploys the frontend web app (HTML/JS) to Azure Storage Static Website
# It runs automatically whenever code is pushed to the "main" branch

name: Frontend Deploy

on:
  push:
    branches:
      - main   # Trigger pipeline only when pushing to main branch

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest   # Use a Linux runner provided by GitHub

    steps:
      # Step 1: Checkout the repository code
      - name: Checkout code
        uses: actions/checkout@v3

      # Step 2: Upload frontend files to Azure Storage
      # Requires AZURE_STORAGE_CONNECTION_STRING secret in GitHub
      - name: Deploy to Azure Storage Static Website
        uses: azure/storage-blob-upload-action@v1
        with:
          connection-string: ${{ secrets.AZURE_STORAGE_CONNECTION_STRING }}
          container-name: '$web'        # Special container for static website hosting
          source: ./frontend            # Path to your frontend folder (index.html, script.js, CSS)
